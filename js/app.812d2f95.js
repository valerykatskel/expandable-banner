(function(n){function e(e){for(var i,o,s=e[0],h=e[1],c=e[2],g=0,b=[];g<s.length;g++)o=s[g],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&b.push(a[o][0]),a[o]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(n[i]=h[i]);l&&l(e);while(b.length)b.shift()();return r.push.apply(r,c||[]),t()}function t(){for(var n,e=0;e<r.length;e++){for(var t=r[e],i=!0,s=1;s<t.length;s++){var h=t[s];0!==a[h]&&(i=!1)}i&&(r.splice(e--,1),n=o(o.s=t[0]))}return n}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)o.d(t,i,function(e){return n[e]}.bind(null,i));return t},o.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="/expandable-banner/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=h;r.push([0,"chunk-vendors"]),t()})({0:function(n,e,t){n.exports=t("56d7")},"56d7":function(n,e,t){"use strict";t.r(e);t("cadf"),t("551c"),t("f751"),t("097d");var i=t("2b0e"),a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"tb-vision"},[n.useDebugMode?t("div",{staticStyle:{position:"absolute",bottom:"0",left:"0",background:"red",color:"white","font-family":"Arial"}},[t("span",[n._v(n._s(n.smallBannerModeText))]),t("br"),t("span",[n._v("Banner height: "+n._s(this.bannerHeight.toFixed(0)))])]):n._e(),t("div",{directives:[{name:"resize",rawName:"v-resize",value:n.onResize,expression:"onResize"}],staticClass:"tb-vision-holder"},[t("a",{directives:[{name:"touch",rawName:"v-touch:tap",value:n.onClickLink,expression:"onClickLink",arg:"tap"},{name:"touch",rawName:"v-touch:moving",value:n.onBannerMove,expression:"onBannerMove",arg:"moving"},{name:"touch",rawName:"v-touch:end",value:n.onBannerUp,expression:"onBannerUp",arg:"end"}],staticClass:"tb-vision-whole-link",attrs:{href:"#"}}),t("div",{staticClass:"tb-vision-wrapper",style:n.inlineStylesForBanner},[t("div",{directives:[{name:"show",rawName:"v-show",value:n.showSmallBanner,expression:"showSmallBanner"}],ref:"tb-vision--small-wrapper",staticClass:"tb-vision-part tb-vision--small",style:n.inlineSmallOpacity},[n.useHtmlModeSmall?t("iframe",{style:{marginLeft:n.iframeMargin+"px"},attrs:{src:n.bannerSmallHtmlPrepared,width:"728px",height:n.bannerMinHeight,scrolling:"no"}}):n._e(),n.useHtmlModeSmall?n._e():t("img",{ref:"tb-vision--small",attrs:{src:n.bannerSmallSrc,alt:"",id:"tb-vision--small"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:n.showBigBanner,expression:"showBigBanner"}],ref:"tb-vision--big-wrapper",staticClass:"tb-vision-part tb-vision--big",style:n.inlineBigOpacity},[n.useHtmlModeBig?t("iframe",{style:{marginLeft:n.iframeMargin+"px"},attrs:{src:n.bannerBigHtmlPrepared,width:"728px",height:n.bannerMaxHeight,scrolling:"no"}}):n._e(),n.useHtmlModeBig?n._e():t("img",{ref:"tb-vision--big",attrs:{src:this.bannerBigSrc,alt:"",id:"tb-vision--big"}})])])]),t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:n.onBannerTap,expression:"onBannerTap",arg:"tap"},{name:"touch",rawName:"v-touch:moving",value:n.onBannerMove,expression:"onBannerMove",arg:"moving"},{name:"touch",rawName:"v-touch:end",value:n.onBannerUp,expression:"onBannerUp",arg:"end"}],staticClass:"tb-vision-button"},[t("span",[n._v("Свернуть")])])])},r=[],o=(t("a481"),t("ac6a"),t("456d"),t("cffa")),s={name:"expandableBanner",data:function(){return{goUrl:"",useDebugMode:!1,useHtmlModeSmall:!0,useHtmlModeBig:!0,bannerSmallSrc:"",bannerBigSrc:"",bannerSmallHtml:"",bannerBigHtml:"",bannerMinHeight:160,bannerMaxHeight:350,bannerHeight:160,bannerBackground:"#e8cda7",bannerSmallBackground:"transparent",bannerBigBackground:"transparent",bannerDragActive:!1,yPos:0,bannerSmallOpacity:1,bannerBigOpacity:0,direction:"none",bigPartTriggerValue:.2,smallBannerMode:!0,iframeMargin:0,bannerWidth:728}},created:function(){this.applyUserOptions(),this.bannerHeight=this.bannerMinHeight},methods:{applyUserOptions:function(){var n=this;Object.keys(window.initialData).length>0&&Object.keys(window.initialData).map((function(e){n[e]=window.initialData[e]}))},onResize:function(n){var e=n.width;this.iframeMargin=this.calcIframeMargin(e)},calcIframeMargin:function(n){var e=this.bannerWidth-n;return e/2*-1},onBannerTap:function(){this.bannerHeight<=this.bannerMinHeight&&this.increaseBannerHightToMax(),this.bannerHeight===this.bannerMaxHeight&&this.reduceBannerHightToMin()},onClickLink:function(){this.smallBannerMode?this.increaseBannerHightToMax():window.open(this.goUrl,"_blank")},onBannerDown:function(n){this.yPos=void 0!==n.targetTouches?n.targetTouches[0].clientY:n.target.$$touchObj.startY,this.yPos>0&&(this.bannerDragActive=!0)},onBannerUp:function(){this.bannerDragActive&&(this.bannerDragActive=!1,this.yPos=0)},onBannerMove:function(n){if(void 0!==n.targetTouches){this.bannerHeight===this.bannerMinHeight&&(this.yPos=this.bannerMinHeight),this.bannerDragActive||(this.bannerDragActive=!0);var e=n.targetTouches[0].clientY,t=e-this.yPos;this.yPos=e,this.bannerHeight+=t,this.getOpacityForSmallBannerPart(t),this.getOpacityForBigBannerPart(t),this.checkBannerHeight()}},getOpacityForSmallBannerPart:function(n){var e=n*(100/this.bannerMovingSize)/100;this.bannerSmallOpacity-=e,this.bannerSmallOpacity<0&&(this.bannerSmallOpacity=0),this.bannerSmallOpacity>1&&(this.bannerSmallOpacity=1)},getOpacityForBigBannerPart:function(n){if(this.showBigBanner)if(this.bannerHeight>=this.bannerMaxHeight)this.bannerBigOpacity=1;else{if(this.bigPartTriggerValue<1){var e=n*(100/(this.bannerMovingSize*this.bigPartTriggerValue))/100;this.bannerBigOpacity+=e}this.bannerBigOpacity<0&&(this.bannerBigOpacity=0),this.bannerBigOpacity>1&&(this.bannerBigOpacity=1)}},checkBannerHeight:function(){this.bannerHeight<this.bannerMinHeight&&(this.bannerHeight=this.bannerMinHeight),this.bannerHeight>this.bannerMaxHeight&&(this.bannerHeight=this.bannerMaxHeight)},increaseBannerHightToMax:function(){this.$refs["tb-vision--big-wrapper"].style["display"]="block";var n=new o["a"];n.addLabel("startBigBannerShowing","+=0.1").to(this.$data,.5,{bannerHeight:this.bannerMaxHeight,bannerSmallOpacity:0}).to(this.$data,.3,{bannerBigOpacity:1},"startBigBannerShowing")},reduceBannerHightToMin:function(){o["b"].to(this.$data,.5,{bannerHeight:this.bannerMinHeight,bannerSmallOpacity:1})},utf8_to_b64:function(n){return window.btoa(unescape(encodeURIComponent(n)))},b64_to_utf8:function(n){return decodeURIComponent(escape(window.atob(n)))}},mounted:function(){var n=this;this.$nextTick((function(){var e=document.querySelector(".tb-vision-holder").offsetWidth;n.iframeMargin=n.iframeMargin=n.calcIframeMargin(e)}))},watch:{bannerHeight:function(n,e){!this.bannerDragActive||n!==this.bannerMinHeight&&n!==this.bannerMaxHeight||(this.yPos=0,this.bannerDragActive=!1),n>this.bannerMinHeight&&e===this.bannerMinHeight&&(document.querySelector("body").classList.add("active"),window.parent.scrollTo(0,45),"function"===typeof window.expandBanner&&window.expandBanner()),n<this.bannerMaxHeight&&e===this.bannerMaxHeight&&(document.querySelector("body").classList.remove("active"),window.parent.scrollTo(0,45)),n===this.bannerMinHeight&&"function"===typeof window.collapseBanner&&window.collapseBanner(),n===this.bannerMinHeight&&(this.smallBannerMode=!0),n===this.bannerMaxHeight&&(this.smallBannerMode=!1),this.direction=n>e?"down":"up","down"===this.direction&&this.bannerSmallOpacity<=.1&&0!==this.bannerSmallOpacity&&(this.bannerSmallOpacity=0)},bannerDragActive:function(n){n||this.bannerHeight===this.bannerMinHeight||this.bannerHeight===this.bannerMaxHeight||("down"===this.direction&&this.increaseBannerHightToMax(),"up"===this.direction&&this.reduceBannerHightToMin())}},computed:{inlineStylesForBanner:function(){return"height: ".concat(this.bannerHeight,"px; background: ").concat(this.bannerBackground)},inlineSmallOpacity:function(){return"opacity: ".concat(this.bannerSmallOpacity,"; background: ").concat(this.bannerSmallBackground)},inlineBigOpacity:function(){return"opacity: ".concat(this.bannerBigOpacity,"; background: ").concat(this.bannerBigBackground)},showBigBanner:function(){return this.bannerHeight>=this.bannerMaxHeight-this.bannerMaxHeight*this.bigPartTriggerValue},showSmallBanner:function(){return this.bannerHeight<this.bannerMaxHeight},bannerMovingSize:function(){return this.bannerMaxHeight-this.bannerMinHeight},smallBannerModeText:function(){return this.smallBannerMode?"Small banner shown":"Large banner shown"},bannerBigHtmlPrepared:function(){var n=this.b64_to_utf8(this.bannerBigHtml);return""!==n?n="data:text/html;base64,".concat(this.utf8_to_b64(n.replace(/(<head>)/g,'$1<base href="https://banners.adfox.ru/>"/>'))):this.useHtmlModeBig=!1,n},bannerSmallHtmlPrepared:function(){var n=this.b64_to_utf8(this.bannerSmallHtml);return""!==n?n="data:text/html;base64,".concat(this.utf8_to_b64(n.replace(/(<head>)/g,'$1<base href="https://banners.adfox.ru/>"/>'))):this.useHtmlModeSmall=!1,n}}},h=s,c=t("2877"),l=Object(c["a"])(h,a,r,!1,null,null,null),g=l.exports,b=t("0086"),u=t.n(b),p=t("e49d"),d=t.n(p);t("c1c3");i["a"].use(d.a),i["a"].use(u.a),i["a"].config.productionTip=!1,new i["a"]({render:function(n){return n(g)}}).$mount("#app")},c1c3:function(n,e,t){}});
//# sourceMappingURL=app.812d2f95.js.map